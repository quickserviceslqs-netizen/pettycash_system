{% extends 'base.html' %}
{% load static %}

{% block title %}System Information - {{ block.super }}{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="bi bi-info-circle-fill"></i> System Information</h2>
                <a href="{% url 'settings_manager:dashboard' %}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Settings
                </a>
            </div>

            <!-- Django Information -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-code-square"></i> Django Framework</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Version:</dt>
                                <dd class="col-sm-8"><code>{{ django_version }}</code></dd>
                                
                                <dt class="col-sm-4">Debug Mode:</dt>
                                <dd class="col-sm-8">
                                    {% if debug_mode %}
                                        <span class="badge bg-warning text-dark">
                                            <i class="bi bi-exclamation-triangle"></i> Enabled
                                        </span>
                                    {% else %}
                                        <span class="badge bg-success">
                                            <i class="bi bi-check-circle"></i> Disabled
                                        </span>
                                    {% endif %}
                                </dd>
                                
                                <dt class="col-sm-4">Database:</dt>
                                <dd class="col-sm-8"><code>{{ database_engine }}</code></dd>

                                <dt class="col-sm-4">DB Name:</dt>
                                <dd class="col-sm-8"><code>{{ database_name }}</code></dd>

                                <dt class="col-sm-4">DB Host:</dt>
                                <dd class="col-sm-8"><code>{{ database_host }}{% if database_port %}:{{ database_port }}{% endif %}</code></dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Time Zone:</dt>
                                <dd class="col-sm-8"><code>{{ timezone }}</code></dd>
                                
                                <dt class="col-sm-4">Language:</dt>
                                <dd class="col-sm-8"><code>{{ language }}</code></dd>
                                
                                <dt class="col-sm-4">Secret Key:</dt>
                                <dd class="col-sm-8">
                                    <span class="text-muted">
                                        <i class="bi bi-shield-lock-fill"></i> {{ secret_key_length }} characters
                                    </span>
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Python Information -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-file-code"></i> Python Runtime</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Version:</dt>
                                <dd class="col-sm-8"><code>{{ python_version }}</code></dd>
                                
                                <dt class="col-sm-4">Implementation:</dt>
                                <dd class="col-sm-8"><code>{{ python_implementation }}</code></dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Executable:</dt>
                                <dd class="col-sm-8"><small class="font-monospace">{{ python_executable }}</small></dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Information -->
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-laptop"></i> Operating System</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">System:</dt>
                                <dd class="col-sm-8"><code>{{ platform_system }}</code></dd>
                                
                                <dt class="col-sm-4">Release:</dt>
                                <dd class="col-sm-8"><code>{{ platform_release }}</code></dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Architecture:</dt>
                                <dd class="col-sm-8"><code>{{ platform_machine }}</code></dd>
                                
                                <dt class="col-sm-4">Processor:</dt>
                                <dd class="col-sm-8"><small><code>{{ platform_processor }}</code></small></dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cache Configuration -->
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-memory"></i> Cache Configuration</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-3">Backend:</dt>
                        <dd class="col-sm-9"><code>{{ cache_backend }}</code></dd>
                    </dl>
                </div>
            </div>

            <!-- Email Configuration -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-envelope"></i> Email Configuration</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Backend:</dt>
                                <dd class="col-sm-8"><code>{{ email_backend }}</code></dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Host:</dt>
                                <dd class="col-sm-8"><code>{{ email_host }}</code></dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Settings -->
            <div class="card mb-4">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="bi bi-shield-check"></i> Security Settings</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">CSRF Secure:</dt>
                                <dd class="col-sm-8">
                                    {% if csrf_cookie_secure %}
                                        <span class="badge bg-success">
                                            <i class="bi bi-check-circle"></i> Enabled
                                        </span>
                                    {% else %}
                                        <span class="badge bg-warning text-dark">
                                            <i class="bi bi-exclamation-triangle"></i> Disabled
                                        </span>
                                    {% endif %}
                                </dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Session Secure:</dt>
                                <dd class="col-sm-8">
                                    {% if session_cookie_secure %}
                                        <span class="badge bg-success">
                                            <i class="bi bi-check-circle"></i> Enabled
                                        </span>
                                    {% else %}
                                        <span class="badge bg-warning text-dark">
                                            <i class="bi bi-exclamation-triangle"></i> Disabled
                                        </span>
                                    {% endif %}
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Resources -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-speedometer2"></i> System Resources</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6 class="text-center mb-3">Memory</h6>
                            <div class="progress mb-2" style="height: 20px;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: {{ memory_percent }}%" 
                                     aria-valuenow="{{ memory_percent }}" aria-valuemin="0" aria-valuemax="100">
                                    {{ memory_percent }}%
                                </div>
                            </div>
                            <small class="text-muted text-center d-block">
                                {{ memory_used }} GB / {{ memory_total }} GB
                            </small>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-center mb-3">Disk Space</h6>
                            <div class="progress mb-2" style="height: 20px;">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ disk_percent }}%" 
                                     aria-valuenow="{{ disk_percent }}" aria-valuemin="0" aria-valuemax="100">
                                    {{ disk_percent }}%
                                </div>
                            </div>
                            <small class="text-muted text-center d-block">
                                {{ disk_used }} GB / {{ disk_total }} GB
                            </small>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-center mb-3">CPU Usage</h6>
                            <div class="progress mb-2" style="height: 20px;">
                                <div class="progress-bar bg-danger" role="progressbar" style="width: {{ cpu_percent }}%" 
                                     aria-valuenow="{{ cpu_percent }}" aria-valuemin="0" aria-valuemax="100">
                                    {{ cpu_percent }}%
                                </div>
                            </div>
                            <small class="text-muted text-center d-block">
                                {{ cpu_count }} cores
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Environment Information -->
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-gear"></i> Environment</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-3">Environment:</dt>
                        <dd class="col-sm-9">
                            <span class="badge bg-info">{{ environment|title }}</span>
                        </dd>
                        
                        <dt class="col-sm-3">Server Software:</dt>
                        <dd class="col-sm-9"><code>{{ server_software }}</code></dd>
                    </dl>
                </div>
            </div>

            <!-- Installed Apps -->
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-app-indicator"></i> Installed Django Apps</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for app in installed_apps %}
                            <div class="col-md-3 mb-2">
                                <span class="badge bg-light text-dark border">{{ app }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Middleware -->
            <div class="card mb-4">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="bi bi-layers"></i> Middleware Stack</h5>
                </div>
                <div class="card-body">
                    <ol class="list-group list-group-numbered">
                        {% for mw in middleware %}
                            <li class="list-group-item">
                                <small class="font-monospace">{{ mw }}</small>
                            </li>
                        {% endfor %}
                    </ol>
                </div>
            </div>

            <!-- Statistics -->
            <div class="row">
                <div class="col-md-3 mb-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-primary">{{ total_users }}</h3>
                            <p class="text-muted mb-0">Total Users</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-success">{{ active_users }}</h3>
                            <p class="text-muted mb-0">Active Users</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-info">{{ total_settings }}</h3>
                            <p class="text-muted mb-0">System Settings</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-warning">{{ total_logs }}</h3>
                            <p class="text-muted mb-0">Activity Logs</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
